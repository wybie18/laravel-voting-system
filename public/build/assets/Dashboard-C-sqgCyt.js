import{r as o,j as e,Y as g}from"./app-9rwdUzxn.js";import{A as p}from"./AdminAuthenticatedLayout-BjnP6pF6.js";import{l as j,B as b,C as v,a as N,L as u,b as f,p as w,c as y,d as C}from"./index-BHVH6N-g.js";import"./ApplicationLogo-DN3UJs5J.js";import"./transition-DC3a9QNy.js";import"./ResponsiveNavLink-lovwj04Z.js";import"./index-DGgijKpL.js";const _=({children:c})=>{const i=o.useRef(null),t=j.useReactToPrint({content:()=>i.current,removeAfterPrint:!0});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 border-b flex items-center justify-end",children:e.jsxs("button",{type:"button",onClick:t,className:"bg-green-900 py-1 px-3 text-white rounded shadow transition-all hover:bg-green-700 mb-4",children:[e.jsx("i",{className:"fa-solid fa-print inline"}),e.jsx("span",{className:"ml-2",children:"Print"})]})}),e.jsxs("div",{className:"w-full h-full",ref:i,children:[e.jsxs("div",{className:"print-header text-center",children:[e.jsx("img",{className:"mx-auto w-32 object-cover",src:"/logo.png",alt:"logo"}),e.jsx("img",{className:"mx-auto w-72 object-cover",src:"/xavier_name.png",alt:"logo"})]}),e.jsx("div",{children:c})]})]})};v.register(N,u,f,w,y,C);function R({auth:c,initialData:i}){const[t,x]=o.useState(i);o.useEffect(()=>{const s=async()=>{const r=await(await fetch("/api/dashboard/data")).json();x(r)};s();const a=setInterval(s,1500);return()=>clearInterval(a)},[]);const m=s=>{const a=s.candidates.map(l=>l.name),n=s.candidates.map(l=>l.votes_count);return{labels:a,datasets:[{label:"Vote Count",data:n,backgroundColor:"rgba(74, 222, 128, 0.5)",borderColor:["rgba(75, 192, 192, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"].slice(0,n.length),borderWidth:1}]}},h=s=>({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:s,font:{size:20},position:"top"}},scales:{y:{ticks:{beginAtZero:!0,stepSize:1}}}});return e.jsxs(p,{user:c.user,header:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"})}),children:[e.jsx(g,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("div",{className:"flex items-center overflow-hidden",children:[e.jsx("span",{className:"p-4 bg-green-700 text-gray-100 w-16 text-center",children:e.jsx("i",{className:"fa-solid fa-xl fa-square-poll-vertical"})}),e.jsxs("div",{className:"px-4 text-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold tracking-wider text-nowrap text-gray-500",children:"Active Election"}),e.jsx("p",{className:"text-3xl text-gray-700",children:e.jsx("span",{children:t.totalActiveElections})})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("div",{className:"flex items-center overflow-hidden",children:[e.jsx("span",{className:"p-4 bg-green-700 text-gray-100 w-16 text-center",children:e.jsx("i",{className:"fa-solid fa-xl fa-bars-progress fa-xl"})}),e.jsxs("div",{className:"px-4 text-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold tracking-wider text-nowrap text-gray-500",children:"Active Position"}),e.jsx("p",{className:"text-3xl text-gray-700",children:e.jsx("span",{children:t.totalActivePosition})})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("div",{className:"flex items-center overflow-hidden",children:[e.jsx("span",{className:"p-4 bg-green-700 text-gray-100 w-16 text-center",children:e.jsx("i",{className:"fa-solid fa-xl fa-user-tie"})}),e.jsxs("div",{className:"px-4 text-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold tracking-wider text-nowrap text-gray-500",children:"Candidates"}),e.jsx("p",{className:"text-3xl text-gray-700",children:e.jsx("span",{children:t.totalCandidates})})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("div",{className:"flex items-center overflow-hidden",children:[e.jsx("span",{className:"p-4 bg-green-700 text-gray-100 w-16 text-center",children:e.jsx("i",{className:"fa-solid fa-xl fa-users"})}),e.jsxs("div",{className:"px-4 text-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold tracking-wider text-nowrap text-gray-500",children:"Members"}),e.jsx("p",{className:"text-3xl text-gray-700",children:e.jsx("span",{children:t.totalMembers})})]})]})})})]}),t.elections.length>0?t.elections.map(s=>e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"overflow-auto",children:[e.jsxs("div",{className:"print-header text-center",children:[e.jsx("img",{className:"mx-auto w-32 object-cover",src:"/logo.png",alt:"logo"}),e.jsx("img",{className:"mx-auto w-72 object-cover",src:"/xavier_name.png",alt:"logo"})]}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.image_url&&e.jsx("img",{src:"/storage/"+s.image_url,alt:"logo",className:"w-12 h-12 object-cover"}),e.jsx("h2",{className:"text-2xl font-semibold",children:s.name})]}),e.jsx("span",{className:"on-print bg-green-900 py-1 px-3 me-2 text-white rounded shadow transition-all hover:bg-green-700 float-end",title:"Vote Count",children:e.jsxs("span",{className:"text-gray-100 text-nowrap",children:[t.votersVote.voted," / ",t.votersVote.voters]})})]}),e.jsxs("table",{className:"table-auto min-w-full mb-4 border-collapse border-gray-200",children:[e.jsx("thead",{className:"text-md text-gray-700 uppercase bg-gray-50 border-b-2 border-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Position"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Candidate"}),e.jsx("th",{className:"px-4 py-2 w-40",children:"Vote Count"}),e.jsx("th",{className:"px-4 py-2 w-32",children:"Rank"})]})}),e.jsx("tbody",{children:s.positions.map(a=>{const n=[...a.candidates].sort((r,l)=>l.votes_count-r.votes_count);return n.map((r,l)=>{let d="";return l===0&&(d="bg-green-400"),e.jsxs("tr",{children:[l===0&&e.jsx("td",{className:"px-4 py-2 border-b border-r font-medium",rowSpan:n.length,children:a.name}),e.jsx("td",{className:"px-4 py-2 border-b",children:r.name}),e.jsx("td",{className:"px-4 py-2 border-b text-center",children:r.votes_count}),e.jsx("td",{className:"px-4 py-2 border-b text-center "+(r.votes_count!==0?d:""),children:r.votes_count!==0?l+1:"0"})]},r.id)})})})]})]})]}),e.jsx("div",{className:"grid lg:grid-cols-2 grid-cols-1 gap-8 mt-8",children:s.positions.map(a=>e.jsx("div",{className:"mb-8",children:e.jsx(b,{data:m(a),options:h(a.name),className:"border py-1 px-2"})},a.id))})]})})},s.id)):e.jsx("h2",{className:"text-center mt-4 text-lg text-gray-700",children:"There are currently no active elections."})]})})]})}export{R as default};
