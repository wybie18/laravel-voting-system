import{r as f,W as b,j as e,y as _}from"./app-CR-GUe7K.js";import{I as n}from"./InputError-D0AyQQgY.js";import{I as d}from"./InputLabel-B0oPyaXm.js";import{M as N}from"./Modal-CSGpvlZG.js";import{P as y}from"./PrimaryButton-D3aUvYKt.js";import{S as C}from"./SecondaryButton-CKLJQ-ye.js";import{S}from"./SelectInput-OD24Gz95.js";import{T as u}from"./TextInput-B2-xQ8GK.js";import{T as w}from"./Textarea-TiTZtudB.js";import{_ as E}from"./index-C6y76Kkc.js";import{$ as F}from"./module-N3KnRddJ.js";import"./transition-DzwRbnmC.js";function z({modalOpen:x,closeModal:c,activePositions:h,candidate:t}){const[p,m]=f.useState(!1),{data:s,setData:i,post:I,processing:P,errors:o,reset:g}=b({image:"",name:"",platform:"",position_id:""});f.useEffect(()=>{t&&i({name:t.name,platform:t.platform,position_id:t.position.id})},[t]);const j=a=>{if(a){let r=0;for(const l in a)a.hasOwnProperty(l)&&setTimeout(()=>{E.error(a[l])},r),r+=150}},v=(a,r)=>{a.preventDefault(),m(!0),_.post(route("candidate.update",r),{_method:"PUT",name:s.name,platform:s.platform,position_id:s.position_id,image:s.image},{preserveScroll:!0,onSuccess:()=>{g(),c(),m(!1)},onError:l=>{j(l),m(!1)},onFinish:()=>{m(!1)}})};return e.jsx(N,{show:x,onClose:c,children:e.jsxs("form",{onSubmit:a=>v(a,t.id),className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Edit candidate ",t?` - ${t.name}`:""]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("img",{src:t?` ${t.image_url}`:"",alt:"profile",className:"w-40 h-40 object-cover rounded-lg mb-4"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx(d,{htmlFor:"candidate_image",value:"Candidate Image"}),e.jsx(u,{type:"file",className:"mt-1 block w-full p-2 border-green-500",id:"candidate_image",name:"image",onChange:a=>i("image",a.target.files[0])}),e.jsx(n,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(d,{htmlFor:"candidate_name",value:"Candidate Name"}),e.jsx(u,{type:"text",className:"mt-1 block w-full",id:"candidate_name",name:"name",value:s.name,isFocused:!0,onChange:a=>i("name",a.target.value)}),e.jsx(n,{message:o.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(d,{htmlFor:"candidate_description",value:"Candidate Platform"}),e.jsx(w,{className:"mt-1 block w-full",id:"candidate_description",name:"platform",value:s.platform,onChange:a=>i("platform",a.target.value)}),e.jsx(n,{message:o.platform,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 mb-8",children:[e.jsx(d,{htmlFor:"position_id",value:"Positions"}),e.jsxs(S,{className:"mt-1 block w-full",id:"position_id",name:"position",value:s.position_id,onChange:a=>i("position_id",a.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Position From Active Election"}),h.filter(a=>a.election.is_active).map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.election.name]},a.id))]}),e.jsx(n,{message:o.position_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(C,{type:"button",onClick:c,children:"Cancel"}),e.jsx(y,{type:"submit",className:"ms-3",disabled:p,children:p?e.jsx(F,{visible:!0,height:"10",width:"40",color:"#D1D5DB",radius:"9",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:""}):"Submit"})]})]})})}export{z as default};
