import{W as g,r as v,j as e,y as _}from"./app-BcsY7O2q.js";import{I as r}from"./InputError-DKTO_jQh.js";import{I as l}from"./InputLabel-CyGcDeY6.js";import{M as N}from"./Modal-DxtK4YOM.js";import{P as b}from"./PrimaryButton-C8FhZBRR.js";import{S as y}from"./SecondaryButton-fjEJyUDk.js";import{S as C}from"./SelectInput-BVP09Ruf.js";import{T as c}from"./TextInput-3pcFdHwf.js";import{T as S}from"./Textarea-BIM__kE4.js";import{_ as E}from"./index-CVxfNNzs.js";import"./transition-B-1_29jg.js";function R({modalOpen:p,closeModal:d,activePositions:u,candidate:t}){const{data:i,setData:a,post:w,processing:x,errors:m,reset:f}=g({image:"",name:"",description:"",position_id:""});v.useEffect(()=>{t&&a({name:t.name,description:t.description,position_id:t.position.id})},[t]);const j=s=>{if(s){let n=0;for(const o in s)s.hasOwnProperty(o)&&setTimeout(()=>{E.error(s[o])},n),n+=150}},h=(s,n)=>{s.preventDefault(),_.post(route("candidate.update",n),{_method:"PUT",name:i.name,description:i.description,position_id:i.position_id,image:i.image},{preserveScroll:!0,onSuccess:o=>{f(),d()},onError:o=>{j(o)}})};return e.jsx(N,{show:p,onClose:d,children:e.jsxs("form",{onSubmit:s=>h(s,t.id),className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Edit candidate ",t?` - ${t.name}`:""]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("img",{src:t?` ${t.image_url}`:"",alt:"",className:"w-24 h-24 object-cover rounded-full mb-4"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"candidate_image",value:"Candidate Image"}),e.jsx(c,{type:"file",className:"mt-1 block w-full p-2 border",id:"candidate_image",name:"image",onChange:s=>a("image",s.target.files[0])}),e.jsx(r,{message:m.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"candidate_name",value:"Candidate Name"}),e.jsx(c,{type:"text",className:"mt-1 block w-full",id:"candidate_name",name:"name",value:i.name,isFocused:!0,onChange:s=>a("name",s.target.value)}),e.jsx(r,{message:m.name,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"candidate_description",value:"Candidate Platform"}),e.jsx(S,{className:"mt-1 block w-full",id:"candidate_description",name:"description",value:i.description,onChange:s=>a("description",s.target.value)}),e.jsx(r,{message:m.description,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"position_id",value:"Positions"}),e.jsxs(C,{className:"mt-1 block w-full",id:"position_id",name:"position",value:i.position_id,onChange:s=>a("position_id",s.target.value),children:[e.jsx("option",{value:"",hidden:!0,children:"Select Position From Active Election"}),u.filter(s=>s.election.is_active).map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.election.name]},s.id))]}),e.jsx(r,{message:m.position_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(y,{type:"button",onClick:d,children:"Cancel"}),e.jsx(b,{type:"submit",className:"ms-3",disabled:x,children:"Submit"})]})]})})}export{R as default};
